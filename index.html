<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>ðŸŽ® Block Breaker</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>ðŸŽ® Block Breaker</h1>

  <!-- Section d'authentification (visible par dÃ©faut) -->
  <div id="authSection">
    <div id="userPanel">
      <div id="loginSection" class="user-section">
        <h2>Connexion</h2>
        <div id="loginForm">
          <input type="text" id="loginNickname" placeholder="Nickname" required>
          <input type="email" id="loginEmail" placeholder="Email" required>
          <input type="password" id="loginPassword" placeholder="Mot de passe" required>
          <button id="loginBtn">Se connecter</button>
        </div>
        <p>Pas encore inscrit? <a href="#" id="showRegisterLink">S'inscrire</a></p>
      </div>

      <div id="registerSection" class="user-section" style="display:none">
        <h2>Inscription</h2>
        <div id="registerForm">
          <input type="text" id="registerNickname" placeholder="Nickname" required>
          <input type="email" id="registerEmail" placeholder="Email" required>
          <input type="password" id="registerPassword" placeholder="Mot de passe" required>
          <button id="registerBtn">S'inscrire</button>
        </div>
        <p>DÃ©jÃ  inscrit? <a href="#" id="showLoginLink">Se connecter</a></p>
      </div>
    </div>
  </div>

  <!-- Section de jeu (cachÃ©e par dÃ©faut) -->
  <div id="gameSection" style="display:none">
    <div id="userInfoSection" class="user-section">
      <h2>Joueur</h2>
      <p>Nickname: <span id="userNickname"></span></p>
      <p>Email: <span id="userEmail"></span></p>
      <div id="bestScore">Meilleur score: <span id="bestScoreValue">0</span></div>
      <button id="logoutBtn">DÃ©connexion</button>
    </div>

    <div id="scoreBoard">Score: 0</div>
    <canvas id="gameCanvas" width="480" height="320"></canvas>
    <div id="message"></div>
    <button id="restartBtn" style="display:none;">Rejouer</button>
  </div>
  
  <!-- Section classement (cachÃ©e par dÃ©faut) -->
  <div id="leaderboardSection" style="display:none">
    <h2>Classement des meilleurs scores</h2>
    <table id="leaderboardTable">
      <thead>
        <tr>
          <th>Rang</th>
          <th>Joueur</th>
          <th>Score</th>
        </tr>
      </thead>
      <tbody id="leaderboardBody">
        <!-- Les donnÃ©es du classement seront insÃ©rÃ©es ici dynamiquement -->
      </tbody>
    </table>
    <button id="backToGameBtn">Retour au jeu</button>
  </div>  <!-- Affichage des erreurs -->
  <div id="errorMessage" style="display:none; background-color: #f8d7da; color: #721c24; padding: 10px; margin: 10px; border-radius: 5px;"></div>
  
  <!-- Firebase SDK -->
  <script type="module">
    // VÃ©rifiez si Firebase est bien chargÃ©
    window.handleFirebaseError = function(error) {
      console.error("Erreur Firebase:", error);
      const errorMessage = document.getElementById("errorMessage");
      errorMessage.textContent = `Erreur: ${error.message} (${error.code})`;
      errorMessage.style.display = "block";
    };
  </script>
  
  <script type="module" src="firebase-config.js"></script>
  <script type="module" src="user-firebase.js"></script>
  <script src="game.js"></script>
  
  <!-- Script d'initialisation pour les fonctions globales -->
  <script>
    // Ces fonctions servent de pont entre les modules et le code non-module
    window.firebaseInitialized = false;
    window.onFirebaseInitialized = function() {
      window.firebaseInitialized = true;
      console.log("Firebase initialisÃ© avec succÃ¨s");
    };
  </script>
</body>
</html>
